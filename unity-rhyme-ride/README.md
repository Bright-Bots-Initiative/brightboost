# Rhyme & Ride - Unity WebGL Minigame

A K-2 reading/rhyming minigame built with Unity for BrightBoost.

## Game Overview

Players identify rhyming words by tapping targets in a 3-lane "Gotcha-style" shooter. Word targets scroll down from the top of the screen, and players must tap the word that rhymes with the prompt.

### Gameplay
- **Objective**: Tap the word that rhymes with the prompt word
- **Scoring**: +1 point for correct answers
- **Lives**: Start with 3 lives, lose one for each miss or wrong answer
- **Win condition**: Complete all rounds or reach target score

## Project Structure

```
unity-rhyme-ride/
├── Assets/
│   ├── Editor/
│   │   └── RhymeRideSceneBuilder.cs   # Auto-generates scene and prefabs
│   ├── Plugins/
│   │   └── WebGL/
│   │       └── WebBridge.jslib        # JS callbacks for WebGL
│   ├── Prefabs/
│   │   └── Target.prefab              # (generated by scene builder)
│   ├── Scenes/
│   │   └── RhymeRideScene.unity       # (generated by scene builder)
│   └── Scripts/
│       ├── RhymeRideGameManager.cs    # Main game logic
│       ├── RhymeRideTarget.cs         # Target behavior
│       └── WebBridge.cs               # Unity ↔ JavaScript bridge
└── README.md
```

## Setup Instructions

### 1. Create Unity Project

1. Open Unity Hub and create a new 2D project named `rhyme-ride`
2. Copy the contents of this folder into the new project's Assets folder

### 2. Generate Scene

1. Open Unity Editor
2. Go to **BrightBoost > Build Rhyme & Ride Scene** in the menu
3. This creates the scene, UI, prefabs, and wires up all references

### 3. Build for WebGL

1. Go to **File > Build Settings**
2. Select **WebGL** platform and click **Switch Platform**
3. Configure Player Settings:
   - **Product Name**: `rhyme-ride`
   - **Company Name**: `BrightBoost`
   - **Resolution**: 960x600 (or similar 16:10)
   - **WebGL Template**: Default or Minimal
   - **Compression Format**: Gzip (recommended)
4. Click **Build** and select output folder
5. Rename output files:
   - `Build/<name>.loader.js` → `rhyme-ride.loader.js`
   - `Build/<name>.data` → `rhyme-ride.data`
   - `Build/<name>.framework.js` → `rhyme-ride.framework.js`
   - `Build/<name>.wasm` → `rhyme-ride.wasm`

### 4. Deploy

Copy the 4 build files to:
```
public/games/rhyme-ride/Build/
```

## JavaScript Integration

### Sending Config to Unity

```javascript
unityInstance.SendMessage("WebBridge", "InitRhymeRide", JSON.stringify({
  sessionId: "unique-session-id",
  rounds: [
    {
      promptWord: "cat",
      correctWord: "hat",
      distractors: ["dog", "tree"],
      lane: 1
    },
    // ... more rounds
  ],
  targetScore: 5,
  timeLimit: 0
}));
```

### Receiving Completion Event

```javascript
window.addEventListener("unityRhymeRideComplete", (e) => {
  const { sessionId, score, accuracy } = e.detail;
  // Validate sessionId matches expected value
  // Call completion handler
});
```

## Activity Content JSON Format

```json
{
  "gameKey": "rhyme_ride_unity",
  "rounds": [
    {
      "promptWord": { "en": "cat", "es": "gato" },
      "correctWord": { "en": "hat", "es": "sombrero" },
      "distractors": [
        { "en": "dog", "es": "perro" },
        { "en": "tree", "es": "árbol" }
      ],
      "lane": 1
    }
  ],
  "targetScore": 5,
  "timeLimit": 60
}
```

## Development Notes

- Target prefab uses TextMesh for world-space text rendering
- Lane touch zones use BoxCollider2D triggers
- Game manager handles round spawning with configurable intervals
- WebBridge dispatches CustomEvents to parent React app
- SessionId validation prevents stale/cross-tab completion events
